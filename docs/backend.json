{
  "entities": {
    "BirthdayWish": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "BirthdayWish",
      "type": "object",
      "description": "Represents a birthday wish submitted by a user.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the birthday wish."
        },
        "message": {
          "type": "string",
          "description": "The text of the birthday wish."
        },
        "createdAt": {
          "type": "string",
          "description": "The date and time when the wish was created.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "message",
        "createdAt"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}/wishes/{wishId}",
        "definition": {
          "entityName": "BirthdayWish",
          "schema": {
            "$ref": "#/backend/entities/BirthdayWish"
          },
          "description": "Stores birthday wishes for each user. Wishes are owned by the user, enabling path-based access control.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier for the user."
            },
            {
              "name": "wishId",
              "description": "The unique identifier for the birthday wish."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore structure is designed to store birthday wishes submitted by users. It utilizes path-based ownership under the `/users/{userId}/wishes` collection, ensuring only the authenticated user can manage their own wishes. This structure promotes authorization independence as access control is directly tied to the user's ID, avoiding reliance on parent document data. The structure facilitates list operations because security rules can be written to only allow listing of wishes under the authenticated user's path, thus supporting QAPs."
  }
}